{% extends 'base.html' %}

{% block app_content %}
    <div class="container">
        <div class="row d-flex justify-content-center align-items-center">
            <div class="col-10 col-md-8 col-lg-6 col-xl-6">
                <h5 class="mb-4 text-center">Оформление доставки</h5>
                <form action="" method="post" novalidate>
                    {{ order_form.hidden_tag() }}
                    <div class="mb-3">
                        <h6 class="mb-4 text-center">{{ order_form.address.label(class_="mb-1") }}</h6>
                        <div class="row g-3 text-center">
                            {% for subfield in order_form.address %}
                                <div class="col-md-6">
                                <tr>
                                    <td>{{ subfield(class_="form-check-input", onclick="openAddressForm(); openSavedAddresses();") }}</td>
                                    <td>{{ subfield.label(class_="form-check-label mb-1") }}</td>
                                </tr>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="row g-3 visually-hidden mb-3" id="address-form">
                        <div class="col-md-6">
                            {{ order_form.street.label(class_="form-label", for="InputStreet") }}
                            {{ order_form.street(class_="form-control", id="InputStreet") }}
                            {% for error in order_form.street.errors %}
                                <span style="color: red;">{{ error }}</span>
                            {% endfor %}
                        </div>
                        <div class="col-md-6">
                            {{ order_form.house.label(class_="form-label", for="InputHouse") }}
                            {{ order_form.house(class_="form-control", id="InputHouse") }}
                            {% for error in order_form.house.errors %}
                                <span style="color: red;">{{ error }}</span>
                            {% endfor %}
                        </div>
                        <div class="col-md-6">
                            {{ order_form.building.label(class_="form-label", for="InputBuilding") }}
                            {{ order_form.building(class_="form-control", id="InputBuilding", value='') }}
                        </div>
                        <div class="col-md-6">
                            {{ order_form.entrance.label(class_="form-label", for="InputEntrance") }}
                            {{ order_form.entrance(class_="form-control", id="InputEntrance", value='') }}
                        </div>
                        <div class="col-md-6">
                            {{ order_form.floor.label(class_="form-label", for="InputFloor") }}
                            {{ order_form.floor(class_="form-control", id="InputFloor", value='') }}
                        </div>
                        <div class="col-md-6">
                            {{ order_form.apartment.label(class_="form-label", for="InputApartment") }}
                            {{ order_form.apartment(class_="form-control", id="InputApartment", value='') }}
                        </div>
                        <div class="col-12">
                            {{ order_form.additional_info.label(class_="form-label", for="InputAdditionalInfo") }}
                            {{ order_form.additional_info(class_="form-control", id="InputAdditionalInfo", value='') }}
                        </div>
                    </div>
                    <div class="visually-hidden mb-3" id="saved-addresses">
                        {{ order_form.saved_addresses(class_="form-select") }}
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        function openAddressForm() {
            radio = document.getElementById('address-1');
            addressForm = document.getElementById('address-form');
            if (radio.checked) {
                addressForm.classList.remove('visually-hidden');
            } else {
                addressForm.classList.add('visually-hidden');
            };
        };
        function openSavedAddresses() {
            radio = document.getElementById('address-0');
            savedAddresses = document.getElementById('saved-addresses');
            if (radio.checked) {
                savedAddresses.classList.remove('visually-hidden');
            } else {
                savedAddresses.classList.add('visually-hidden');
            };
        }
    </script>
{% endblock %}